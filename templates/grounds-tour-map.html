{% extends 'base.html' %}
{% block content %}

<style>
  /* Custom CSS to remove border between list-group items */
  .list-group-item {
    border: none;
  }
</style>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

<div class="container my-4">
    <h1 class="mb-4">Maps</h1>

    <!-- Responsive map container using Bootstrap classes -->
    <div id="map" class="mb-4" style="height: 400px;"></div>

    <!-- Using Bootstrap list group for marker information -->
    <ul class="list-group mb-3">
        <li class="list-group-item d-flex align-items-center">
            <span class="rounded-circle bg-success me-3" style="width: 20px; height: 20px;"></span>
            Mepkin Abbey Columarium
        </li>
        <li class="list-group-item d-flex align-items-center">
            <span class="rounded-circle bg-warning me-3" style="width: 20px; height: 20px;"></span>
            Lady of Mepkin
        </li>
        <li class="list-group-item d-flex align-items-center">
            <span class="rounded-circle bg-info me-3" style="width: 20px; height: 20px;"></span>
            Laurens Cemetery
        </li>
        <li class="list-group-item d-flex align-items-center">
            <span class="rounded-circle bg-danger me-3" style="width: 20px; height: 20px;"></span>
            Gift Shop
        </li>
        <li class="list-group-item d-flex align-items-center">
            <span class="rounded-circle bg-primary me-3" style="width: 20px; height: 20px;"></span>
            The Labyrinth
        </li>
    </ul>

    <!-- Bootstrap button for Street View -->
    <a href="{% url 'virtual-tour-street-view' %}" class="btn btn-primary">Open Street View</a>
</div>
<br>
{% include 'navbar.html' %}

<script>

    // function initMap() {
    //     var map = new google.maps.Map(document.getElementById('map'), {
    //         center: { lat: 33.1152391, lng: -79.9442717 },
    //         zoom: 17,
    //     });

    //     var markerPosition = { lat: 33.1160651, lng: -79.9442717 };

    //     var marker = new google.maps.Marker({
    //         position: markerPosition,
    //         map: map,
    //         title: 'Mepkin Abbey',
    //     });




    //     var panorama = new google.maps.StreetViewPanorama(document.getElementById('map'), {
    //         position: markerPosition,
    //         pov: {
    //             heading: 0,
    //             pitch: 0,
    //         },
    //     });

    //     // Set the Street View panorama as the default panorama for the map
    //     map.setStreetView(panorama);
    // }

    var map2 = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 33.1152391, lng: -79.9442717 },
        zoom: 17,
    });

    // Initialize a marker that will represent the user's location
    var userMarker = new google.maps.Marker({
        position: { lat: 33.1152391, lng: -79.9442717 }, // Initial position
        map: map2,
        title: 'Your Location',
        mapTypeId: google.maps.MapTypeId.SATELLITE,

    });

    let m1 = new google.maps.Marker({
        position: { lat: 33.11703389006762, lng: -79.95231856400774 },
        map: map2,
        color: 'blue',
        title: 'Laurens Cemetry',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, // Adjust the size
            fillColor: 'lightblue', // Fill color
            fillOpacity: 1, // Fill opacity
            strokeColor: 'black', // Stroke color
            strokeWeight: 2 // Stroke weight
        }
    })

    let m2 = new google.maps.Marker({
        position: { lat: 33.117839436152956, lng: -79.95219969160443 },
        map: map2,
        color: 'blue',
        title: 'Laurens Cemetry',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, // Adjust the size
            fillColor: 'lightblue', // Fill color
            fillOpacity: 1, // Fill opacity
            strokeColor: 'black', // Stroke color
            strokeWeight: 2 // Stroke weight
        }
    })

    let m3 = new google.maps.Marker({
        position: { lat: 33.11798425264326, lng: -79.95297776551703 },
        map: map2,
        color: 'blue',
        title: 'Laurens Cemetry',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'lightblue',
            fillOpacity: 1, 
            strokeColor: 'black',
            strokeWeight: 2 
        }
    })

    let m4 = new google.maps.Marker({
        position: { lat: 33.11713345234346, lng: -79.95103258073553 },
        map: map2,
        color: 'blue',
        title: 'Lady of Mepkin',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'yellow',
            fillOpacity: 1, 
            strokeColor: 'black',
            strokeWeight: 2 
        }
    })

    let m5 = new google.maps.Marker({
        position: { lat: 33.11855446525771, lng: -79.95290211944457 },
        map: map2,
        color: 'blue',
        title: 'Lady of Mepkin',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'yellow',
            fillOpacity: 1, 
            strokeColor: 'black',
            strokeWeight: 2 
        }
    })

    let m6 = new google.maps.Marker({
        position: { lat: 33.1163689611586, lng: -79.95053464601997 },
        map: map2,
        color: 'blue',
        title: 'Lady of Mepkin',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'yellow',
            fillOpacity: 1, 
            strokeColor: 'black',
            strokeWeight: 2 
        }
    })
    
    let m7 = new google.maps.Marker({
        position: { lat: 33.117118783327314, lng: -79.95604704490015 },
        map: map2,
        color: 'blue',
        title: 'Mepkin Abbey Columarium',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'green',
            fillOpacity: 1, 
            strokeColor: 'white',
            strokeWeight: 2 
        }
    })
    
    let m8 = new google.maps.Marker({
        position: { lat: 33.116026177515245, lng: -79.95107603559019 },
        map: map2,
        color: 'blue',
        title: 'Gift Shop',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'red',
            fillOpacity: 1, 
            strokeColor: 'white',
            strokeWeight: 2 
        }
    })
    
    let m9 = new google.maps.Marker({
        position: { lat: 33.117389403337974, lng:-79.95055054108573 },
        map: map2,
        color: 'blue',
        title: 'Gift Shop',
        icon: {
            path: google.maps.SymbolPath.CIRCLE, // Choose an available symbol
            scale: 10, 
            fillColor: 'blue',
            fillOpacity: 1, 
            strokeColor: 'black',
            strokeWeight: 2 
        }
    })
    


    google.maps.event.addListener(m1, 'click', function () {
        window.location.href = '/laurens-cemetry/';
    });
    google.maps.event.addListener(m2, 'click', function () {
        window.location.href = '/laurens-cemetry/';
    });
    google.maps.event.addListener(m3, 'click', function () {
        window.location.href = '/laurens-cemetry/';
    });
    google.maps.event.addListener(m4, 'click', function () {
        window.location.href = '/lady-of-mepkin/';
    });
    google.maps.event.addListener(m5, 'click', function () {
        window.location.href = '/lady-of-mepkin/';
    });
    google.maps.event.addListener(m6, 'click', function () {
        window.location.href = '/lady-of-mepkin/';
    });
    google.maps.event.addListener(m7, 'click', function () {
        window.location.href = 'https://mepkinabbey.org/columbarium-at-mepkin-abbey/';
    });
    google.maps.event.addListener(m8, 'click', function () {
        window.location.href = 'https://mepkinabbey.org/mepkin-abbey-store/';
    });
    google.maps.event.addListener(m9, 'click', function () {
        window.location.href = 'https://mepkinabbey.org/the-labyrinth-walk/';
    });


    if (navigator.geolocation) {
        navigator.geolocation.watchPosition(function (position) {
            var userLocation = {
                lat: position.coords.latitude,
                lng: position.coords.longitude,
            };

            // Update the marker's position to the new user location
            userMarker.setPosition(userLocation);

        });
    } else {
        alert("Geolocation is not supported by this browser.");
    }

    // initMap();

</script>

{% endblock %}